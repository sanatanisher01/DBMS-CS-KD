{% extends 'base.html' %}

{% block title %}SportSphere - Sports Facility Management{% endblock %}

{% block content %}
<!-- Hero Section with Video Background -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6" data-aos="fade-right" data-aos-duration="1000">
                <h1 class="display-4 fw-bold">Manage Sports Facilities with Ease</h1>
                <p class="lead">SportSphere helps you book, manage, and maintain sports facilities efficiently with our state-of-the-art platform.</p>
                <div class="d-grid gap-2 d-md-flex justify-content-md-start mt-4">
                    <a href="{% url 'facility_list' %}" class="btn btn-primary btn-lg px-4 me-md-2">
                        <i class="bi bi-building me-2"></i>View Facilities
                    </a>
                    {% if not user.is_authenticated %}
                        <a href="{% url 'register' %}" class="btn btn-outline-light btn-lg px-4">
                            <i class="bi bi-person-plus me-2"></i>Sign Up
                        </a>
                    {% else %}
                        <a href="{% url 'booking_create' %}" class="btn btn-outline-light btn-lg px-4">
                            <i class="bi bi-calendar-plus me-2"></i>Book Now
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-6" data-aos="fade-left" data-aos-duration="1000" data-aos-delay="200">
                <img src="https://images.unsplash.com/photo-1526232761682-d26e03ac148e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1029&q=80"
                     alt="Sports Facilities"
                     class="img-fluid rounded-lg shadow-lg hero-image">
            </div>
        </div>
    </div>
</section>

<!-- Stats Counter Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 mb-4 mb-md-0" data-aos="fade-up" data-aos-delay="100">
                <div class="counter-container">
                    <div class="counter-value" data-count="15">0</div>
                    <div class="counter-label">Sports Facilities</div>
                </div>
            </div>
            <div class="col-md-3 mb-4 mb-md-0" data-aos="fade-up" data-aos-delay="200">
                <div class="counter-container">
                    <div class="counter-value" data-count="1500">0</div>
                    <div class="counter-label">Happy Users</div>
                </div>
            </div>
            <div class="col-md-3 mb-4 mb-md-0" data-aos="fade-up" data-aos-delay="300">
                <div class="counter-container">
                    <div class="counter-value" data-count="5000">0</div>
                    <div class="counter-label">Bookings Made</div>
                </div>
            </div>
            <div class="col-md-3" data-aos="fade-up" data-aos-delay="400">
                <div class="counter-container">
                    <div class="counter-value" data-count="98">0</div>
                    <div class="counter-label">% Satisfaction</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section with Hover Effects -->
<section class="py-5 bg-white">
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-6 offset-lg-3 text-center">
                <h2 class="section-title" data-aos="fade-up">Why Choose SportSphere?</h2>
                <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Our platform offers a comprehensive solution for all your sports facility management needs</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                    <h3>Easy Booking</h3>
                    <p>Book sports facilities online with just a few clicks. Check availability in real-time and receive instant confirmations.</p>
                    <a href="{% url 'facility_list' %}" class="feature-link">Book Now <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-tools"></i>
                    </div>
                    <h3>Maintenance Tracking</h3>
                    <p>Report issues and track maintenance status to ensure facilities are always in top condition for optimal performance.</p>
                    <a href="{% url 'maintenance_list' %}" class="feature-link">Report Issue <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-graph-up"></i>
                    </div>
                    <h3>Usage Analytics</h3>
                    <p>Get insights into facility usage patterns to optimize scheduling and resource allocation for maximum efficiency.</p>
                    <a href="{% url 'dashboard' %}" class="feature-link">View Dashboard <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Facilities with Hover Effects -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-6 offset-lg-3 text-center">
                <h2 class="section-title" data-aos="fade-up">Featured Facilities</h2>
                <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Explore our top-rated sports facilities available for booking</p>
            </div>
        </div>
        <div class="row g-4">
            {% for facility in facilities %}
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:"100" }}">
                    <div class="facility-card">
                        {% if facility.type == 'court' %}
                            <img src="https://images.unsplash.com/photo-1546519638-68e109498ffc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1780&q=80"
                                 class="facility-image" alt="{{ facility.name }}">
                        {% elif facility.type == 'gym' %}
                            <img src="https://images.unsplash.com/photo-1534438327276-14e5300c3a48?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
                                 class="facility-image" alt="{{ facility.name }}">
                        {% elif facility.type == 'pool' %}
                            <img src="https://images.unsplash.com/photo-1575429198097-0414ec08e8cd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
                                 class="facility-image" alt="{{ facility.name }}">
                        {% else %}
                            <img src="https://images.unsplash.com/photo-1595435934249-5df7ed86e1c0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1074&q=80"
                                 class="facility-image" alt="{{ facility.name }}">
                        {% endif %}
                        <div class="facility-overlay">
                            <div class="facility-content">
                                <h5>{{ facility.name }}</h5>
                                <p>{{ facility.description|truncatechars:80 }}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="badge bg-primary">{{ facility.get_type_display }}</span>
                                    <a href="{% url 'facility_detail' facility.id %}" class="btn btn-sm btn-light">View Details</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="col-12 text-center">
                    <div class="alert alert-info">
                        <p class="mb-0">No facilities available at the moment. Please check back later.</p>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="text-center mt-5" data-aos="fade-up">
            <a href="{% url 'facility_list' %}" class="btn btn-primary btn-lg">
                <i class="bi bi-grid me-2"></i>View All Facilities
            </a>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="py-5 bg-white">
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-6 offset-lg-3 text-center">
                <h2 class="section-title" data-aos="fade-up">What Our Users Say</h2>
                <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Hear from our satisfied users about their experience with SportSphere</p>
            </div>
        </div>
        <div class="row">
            <div class="col-12" data-aos="fade-up">
                <div id="testimonialCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <div class="testimonial-card">
                                <div class="testimonial-content">
                                    <p>"SportSphere has completely transformed how we manage our university sports facilities. The booking process is seamless, and the maintenance tracking feature has helped us keep our facilities in top condition."</p>
                                    <div class="testimonial-author">
                                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="John Smith" class="testimonial-avatar">
                                        <div>
                                            <h5>John Smith</h5>
                                            <p>Sports Director, State University</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="testimonial-card">
                                <div class="testimonial-content">
                                    <p>"As a student athlete, I love how easy it is to book practice time. The mobile-friendly interface allows me to quickly check availability and make reservations on the go. Highly recommended!"</p>
                                    <div class="testimonial-author">
                                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Sarah Johnson" class="testimonial-avatar">
                                        <div>
                                            <h5>Sarah Johnson</h5>
                                            <p>Student Athlete</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="testimonial-card">
                                <div class="testimonial-content">
                                    <p>"The analytics dashboard has provided valuable insights that have helped us optimize our facility usage. We've been able to reduce costs and improve availability for all users."</p>
                                    <div class="testimonial-author">
                                        <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Michael Chen" class="testimonial-avatar">
                                        <div>
                                            <h5>Michael Chen</h5>
                                            <p>Facility Manager</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#testimonialCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                        <button type="button" data-bs-target="#testimonialCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                        <button type="button" data-bs-target="#testimonialCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action with Gradient Background -->
<section class="cta-section py-5">
    <div class="container text-center">
        <div class="row">
            <div class="col-lg-8 offset-lg-2" data-aos="fade-up">
                <h2 class="mb-4">Ready to Get Started?</h2>
                <p class="lead mb-4">Join SportSphere today and experience hassle-free sports facility management with our comprehensive platform.</p>
                {% if not user.is_authenticated %}
                    <div class="d-grid gap-3 d-sm-flex justify-content-sm-center">
                        <a href="{% url 'register' %}" class="btn btn-light btn-lg px-4 me-sm-3">
                            <i class="bi bi-person-plus me-2"></i>Sign Up Now
                        </a>
                        <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg px-4">
                            <i class="bi bi-box-arrow-in-right me-2"></i>Login
                        </a>
                    </div>
                {% else %}
                    <div class="d-grid gap-3 d-sm-flex justify-content-sm-center">
                        <a href="{% url 'dashboard' %}" class="btn btn-light btn-lg px-4 me-sm-3">
                            <i class="bi bi-speedometer2 me-2"></i>Go to Dashboard
                        </a>
                        <a href="{% url 'booking_create' %}" class="btn btn-outline-light btn-lg px-4">
                            <i class="bi bi-calendar-plus me-2"></i>Book a Facility
                        </a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Image Preview Modal -->
<div class="modal fade" id="imagePreviewModal" tabindex="-1" aria-labelledby="imagePreviewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imagePreviewModalLabel">Facility Image</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <img id="previewImage" src="" alt="Facility Preview" class="img-fluid">
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
<script>
    // Counter animation
    document.addEventListener('DOMContentLoaded', function() {
        const counters = document.querySelectorAll('.counter-value');
        const speed = 200;

        const animateCounter = (counter) => {
            const target = parseInt(counter.getAttribute('data-count'));
            const count = parseInt(counter.innerText);
            const increment = Math.trunc(target / speed);

            if (count < target) {
                counter.innerText = count + increment;
                setTimeout(() => animateCounter(counter), 1);
            } else {
                counter.innerText = target;
            }
        };

        // Use Intersection Observer to trigger counter animation when visible
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounter(entry.target);
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        counters.forEach(counter => {
            observer.observe(counter);
        });
    });
</script>
{% endblock %}
{% endblock %}
